var snackbarContainer=document.querySelector("#toast-message");function getUrlParameter(e){var o,a,s=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<s.length;a++)if((o=s[a].split("="))[0]===e)return void 0===o[1]||o[1]}function webviewClose(){MessengerExtensions.requestCloseBrowser(function(){},function(e){}),setTimeout(window.close(),2e3)}console.log("profile 111--111 ---");var img=1;function imgsrc(e,o,a){var s="430x400",n="avatar_profile_"+e,t="6",i=1;"edit"==o?(s="60x60",n=$(a).attr("id"),t="3",void 0===(i=$(a).attr("id").split("-")[1])&&(s="120x120")):(s="430x400",n="avatar_profile_"+e,t="6",i=1),1==img&&1==i?(img++,void 0!==favs||0!=blurimage?$("#"+n).attr("src","https://img.neargroup.in/project/"+s+"/forcesize/profile_"+channelid):$("#"+n).attr("src","https://img.neargroup.in/project/"+s+"/forcesize/pixelate_"+t+"/profile_"+channelid)):($("#"+n).attr("src","https://img.neargroup.in/project/"+s+"/forcesize/demo_"+e),"edit"==o&&$("#img-"+$(a).attr("id").split("-")[1]).removeClass("uploadcancel").html("add_box"))}function goFullscreen(){console.log("in go fullscreen-- "),document.webkitRequestFullscreen()}function removeTopicFunction(e,o,a,s,n){OpenModal(s,n),$("#btnok").click(function(){CloseModal(),$body.addClass("loading"),""!=o&&$.ajax({type:"POST",url:"userProfile",dataType:"json",data:JSON.stringify({tid:"3",id:o,tname:a}),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(o){($body.removeClass("loading"),o.Grant_Access)?($("#rev_top"+e).html("").addClass("hidden"),showsnackbar("testimonial"==a?{message:"Your review has been deleted",timeout:3e3}.message:{message:"Your post has been deleted",timeout:3e3}.message)):console.log("error")}})}),$("#btncancel").click(function(){count="",o="",a="",s="",n="",CloseModal()})}function editTopicFunction(e,o,a){var s=$("#advices_text"+e).html();void 0===s&&(s="");var n="<textarea name='topictext' class='mdl-textfield__input' id='topictext"+e+"' rows='7'>"+s.replace(/<br>/g,"\n")+"</textarea>",t='<div id="bt_save" style="text-align: center; float: none;"><button class="btn-outline save" onclick=\'saveTopicFunction('+e+', "'+o+'", "'+a+"\")'>save</button></div>";$("#advices_text"+e).html(""),$("#advices_text"+e).html(n),$("#advices_text"+e).append(t),$("#del_rev_top"+e).addClass("hidden"),$("#topictext"+e).focus(),$("#but-editprof").addClass("hidden")}function saveTopicFunction(e,o,a){var s=$("#topictext"+e).val(),n=s,t=$('input[name="youtube'+e+'"]').val(),i=$('input[name="writingcontest'+e+'"]').val();""!=t&&(s+=t);var l='<button class="mdl-button mdl-js-button mdl-button--icon edit" onclick=\'editTopicFunction('+e+', "'+o+'", "'+a+'")\'><i class="material-icons">border_color</i></button><button class="mdl-button mdl-js-button mdl-button--icon delete" onclick=\'removeTopicFunction('+e+', "'+o+'", "'+a+'", "Remove post", "Do you want to remove this post?")\'><i class="material-icons">delete_forever</i></button>',c=s.split("").length,r=19,d=601;(void 0!==i&&""!=i&&(r=249,d=1251),c>r&c<d)?($("#advices_text"+e).html(""),$("#advices_text"+e).html(n.replace(/\n/g,"<br>")),$("#del_rev_top"+e).html(l),$("#but-editprof").removeClass("hidden"),$("#del_rev_top"+e).removeClass("hidden"),$.ajax({type:"POST",url:"userProfile",dataType:"json",data:JSON.stringify({tid:"2",id:o,tname:a,advices_txt:s}),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(s){if($body.removeClass("loading"),!0===s.Grant_Access)showsnackbar({message:"Bingo!!! Your post has been edited",timeout:3e3}.message);else if(!1===s.Grant_Access&&!0===s.isAbuse){showsnackbar({message:"Apologies, your post didn't go through,<br>as it may contain inappropriate words.",timeout:3e3}.message),editTopicFunction(e,o,a)}else if(!1===s.Grant_Access&&!0===s.isLink){showsnackbar({message:"Apologies! you can't use external links.",timeout:3e3}.message),editTopicFunction(e,o,a)}else{showsnackbar({message:"Apologies, your post couldn't be updated,<br>Due to some internal errors",timeout:3e3}.message)}}})):($("#topictext"+e).focus(),$("#topictext"+e).addClass("red"),setTimeout(function(){$("#topictext"+e).removeClass("red")},5e3),showsnackbar({message:"Please, enter minimum "+(r+=1)+" characters",timeout:3e3}.message))}function webviewClose(){MessengerExtensions.requestCloseBrowser(function(){},function(e){}),setTimeout(window.close,500)}$("#btn_editprofile").click(function(){window.location.href="editprofile.html?channelid="+encodeURIComponent(getUrlParameter("channelid"))}),$("#follow_user").click(function(){$.ajax({type:"POST",url:"userProfile",dataType:"json",data:JSON.stringify({tid:"1",channelid:getUrlParameter("channelid"),hYFyh:getUrlParameter("hYFyh"),channelid2:getUrlParameter("channelid2"),kJhuW:getUrlParameter("kJhuW"),abhinay:getUrlParameter("abhinay")}),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if(!0===e.Grant_Access)if("follow"==e.follow){$("#social_icons").hasClass("hidden")?($("#social_icons").removeClass("hidden"),$("#follow-sec").hasClass("hidden")?($("#follow-sec").removeClass(),$("#follow-sec").html('<i class="material-icons">rss_feed</i> <span id="follow">0</span>')):$("#social-icons").html('<div id="follow-sec"><i class="material-icons">rss_feed</i> <span id="follow">0</span></div>')):$("#follow-sec").hasClass("hidden")&&$("#follow-sec").removeClass("hidden").html('<i class="material-icons">rss_feed</i> <span id="follow">0</span>');var o=parseInt($("#follow").html());o+=1,$("#follow").html(o),$("#follow_user").hasClass("followbutton-colorchange")?$("#follow_user").html("Following").addClass("followingbutton-colorchange"):$("#follow_user").html("Following").addClass("followingbutton"),showsnackbar({message:"Now, you are following this user",timeout:3e3}.message)}else{var a=parseInt($("#follow").html());(a-=1)<=0&&($("#follow-sec").addClass("hidden"),$("#wow-sec").hasClass("hidden")&&$("#view-sec").hasClass("hidden")&&$("#social_icons").addClass("hidden")),$("#follow").html(a),$("#follow_user").hasClass("followbutton-colorchange")?$("#follow_user").html("Follow").removeClass("followingbutton-colorchange"):$("#follow_user").html("Follow").removeClass("followingbutton"),showsnackbar({message:"User has been unfollowed",timeout:3e3}.message)}}})}),$("#contact_user").click(function(){var e=$("#contacttextarea").val(),o=e.split("").length;o>19&&o<601?(CloseContactModal(),$.ajax({type:"POST",url:"userProfile",dataType:"json",data:JSON.stringify({tid:"5",channelid:getUrlParameter("channelid"),hYFyh:getUrlParameter("hYFyh"),channelid2:getUrlParameter("channelid2"),kJhuW:getUrlParameter("kJhuW"),abhinay:getUrlParameter("abhinay"),contactmess:e}),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if(!0===e.Grant_Access)showsnackbar({message:"Your message has been sent to this person.",timeout:3e3}.message);else if(!1===e.Grant_Access){if(!0===e.isAbuse)showsnackbar({message:"Apologies, your request didn't go through,<br>as it may contain inappropriate words.",timeout:2e3}.message);else if(!0===e.isBlocked){showsnackbar({message:"User is busy in chatting with someone else, please try again later",timeout:2e3}.message)}else{showsnackbar({message:"Apologies! you can only send one contact request in 24 hours.<br>Please try after "+e.mess+" hour(s).",timeout:2e3}.message)}}$("#contacttextarea").val(""),setTimeout(function(){webviewClose()},3e3)}})):($("#contacttextarea").addClass("error").focus(),$("#errormess").removeClass("hidden").html("Please, provide more than 20 characters."),setTimeout(function(){$("#contacttextarea").removeClass("error"),$("#errormess").addClass("hidden")},5e3))}),$('input[name="notitime"]').click(function(e){var o=$("#notitime_sec").data("getFCMPermission_channelId");console.log("notitime selected!!!!! ","https://web.neargroup.me/FCM/#/?channelId="+o,$("#"+e.target.id).data("getFCMPermission")),$("#"+e.target.id).data("getFCMPermission")&&(console.log("ask permission yaa ",navigator.appVersion),console.log("chrome url= googlechrome://navigate?url=https://web.neargroup.me/onlyFCM/#/?channelId="+o),window.location="googlechrome://navigate?url=https://web.neargroup.me/onlyFCM/#/?channelId="+o)});var latlng="null",locality="null",countr="null",postal_code="null",country="null";function radioMale(){backcolor="#1B9AF3",gender="male",$(".s").addClass("s-colorchange"),$(".checkbox").addClass("is-checked-colorchange"),$("#range"+$('input[name="distance"]').val()).click(),$(".followbutton").addClass("followbutton-colorchange"),$(".rdoControl-Circle").addClass("rdoControl-Circle-colorchange"),$(".rdoControl").addClass("rdoControl-colorchange"),$(".btn-outline").addClass("btn-outline-colorchange"),$("meta[name=theme-color]").attr("content","#1B9AF3")}function radioFemale(){gender="female",backcolor="#fa5194",$(".s").removeClass("s-colorchange"),$(".followbutton").removeClass("followbutton-colorchange"),$(".checkbox").removeClass("is-checked-colorchange").addClass("is-checked"),$("#range"+$('input[name="distance"]').val()).click(),$("#rangec").removeClass("range-colorchange"),$(".rdoControl-Circle").removeClass("rdoControl-Circle-colorchange"),$(".rdoControl").removeClass("rdoControl-colorchange"),$(".btn-outline").removeClass("btn-outline-colorchange"),$("meta[name=theme-color]").attr("content","#ff3d8e")}function changeDob(){console.log("change DOB"),$("#dob-change-alert").removeClass("hidden")}function changeOnce(e){var o={testid:9};"gender"==e&&(o.type=1),"dob"==e&&(o.type=2),o.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(o),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){}})}function changeLocation(){console.log("change DOB"),$("#location-change-alert").removeClass("hidden"),$('input[name="country"]').val("").focus()}$("#btn_save").click(function(){new Date,$('input[name="succeedUsername"]').val(),$('input[name="succeedMobile"]').val();if($("#radioMale, #radioFemale").length>0&&$('input[name="gender"]:checked').length<=0)$('input[name="gender"]').focus(),$("#gender_sec").addClass("error"),setTimeout(function(){$("#gender_sec").removeClass("error")},5e3),showsnackbar({message:"Please, complete all of your preferences",timeout:3e3}.message);else if($("#dob").length>0&&0==$("#dob").val()){$("#dob").focus(),$("#dob_sec").addClass("error"),setTimeout(function(){$("#dob_sec").removeClass("error")},5e3),showsnackbar({message:"Please, complete all of your preferences",timeout:3e3}.message)}else if(0==$('input[name="distance"]').val()){$('input[name="distance"]').focus(),$("#distance_sec").addClass("error"),setTimeout(function(){$("#distance_sec").removeClass("error")},5e3),showsnackbar({message:"Please, complete all of your preferences",timeout:3e3}.message)}else if(""===$("#country").val()){console.log("empty country= ",country),$("#country").focus(),$("#country_sec").addClass("error"),setTimeout(function(){$("#country_sec").removeClass("error")},5e3),showsnackbar({message:"Please, select your locality and country",timeout:3e3}.message)}else if(""!=$("#bio_input").val().trim()&&($("#bio_input").val().trim().length<=10||$("#bio_input").val().toString().length>=300)){s=$("#bio_input").val().trim(),console.log("HELLO got bio= ",s," - "+s.length),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3),showsnackbar({message:"Apologies! About me section must have 10 to 300 characters",timeout:3e3}.message)}else{$body.addClass("loading");var e="null";$("#radioMale, #radioFemale").length>0&&(e=$('input[name="gender"]:checked').val());var o=$('input[name="matchgender"]:checked').val(),a="null";$("#dob").length>0&&(a=$("#dob").val(),console.log("NEW dob= ",a));var s="null";s=$("#bio_input").val(),$('input[name="country"]').val();country=$('input[name="country"]').val()+"$#$"+locality+"$#$"+countr+"$#$"+postal_code+"$#$"+latlng,console.log("NEW got country= ",country);var n=$('input[name="ms"]:checked').val(),t=$('input[name="want-ng"]:checked').val(),i=$('input[name="notitime"]:checked').val(),l=$('input[name="languages"]:checked').val();console.log("save languge: "+l);var c=$('input[name="goverment"]:checked').val(),r="no",d="0";console.log("notitime on save -- ",i),"no"!=$('input[name="follow"]:checked').val()&&(r="yes",$("#removefb").length>0&&(d="1"),$("#removetwitter").length>0&&(d="1"));var u="blank";if((p=(f=$('input:checkbox[name="proud"]:checked').map(function(){return this.value}).get()).length)>0)for(u=f[0],g=1;g<p;g++)u+=" , ",u+=f[g];var m="blank";if((p=(f=$('input:checkbox[name="chatmate"]:checked').map(function(){return this.value}).get()).length)>0)for(m=f[0],g=1;g<p;g++)m+=" , ",m+=f[g];var p,g,h="blank";if((p=(f=$('input:checkbox[name="passions"]:checked').map(function(){return this.value}).get()).length)>0)for(h=f[0],g=1;g<p;g++)h+=", ",h+=f[g];var f,b={data:f=$('input:checkbox[name="interest"]:checked').map(function(){return this.value}).get()},y={testid:"0"};y.channelid=channelid,y.gender=e,y.matchgender=o,y.dob=a,y.country=country,y.bio=s,y.ms=n,y.wantNG=t,y.passions=h,y.proud=u,y.chatmate=m,y.languages=l,y.socialprof=r,y.socialprof_login=d,y.goverment=c,y.interest=b,y.notitime=i,console.log(JSON.stringify(y)),$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(y),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if($body.removeClass("loading"),$("#location-change-alert").addClass("hidden"),$("#gender-change-alert").addClass("hidden"),$("#dob-change-alert").addClass("hidden"),e)if(console.log("data= ",e,e.BIO_PHONE),"save"in e){showsnackbar({message:"Changes saved",timeout:2e3}.message);var o=getUrlParameter("close");void 0===o?window.location.replace("myprofile.html?channelid="+encodeURIComponent(getUrlParameter("channelid"))):"123"==o&&webviewClose()}else if("not_save"in e){if("BIO_VULGAR"in e&&e.BIO_VULGAR)console.log("in bio_vulgar ",e.BIO_VULGAR),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3),showsnackbar({message:"Apologies! Your settings not updated. No explicit words allowed. Please edit your About Me section. ",timeout:3e3}.message);else if("BIO_LINKS"in e&&e.BIO_LINKS){console.log("in bio_LINKS ",e.BIO_LINKS),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3),showsnackbar({message:"Apologies! Links are not supported. Please change your bio.",timeout:3e3}.message)}else if("BIO_PHONE"in e&&e.BIO_PHONE){console.log("in bio_phhone ",e.BIO_PHONE),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3),showsnackbar({message:"Apologies! Phone numbers are not supported. Please change your bio.",timeout:3e3}.message)}else if("BIO_USERNAME"in e&&e.BIO_USERNAME){console.log("in BIO_USERNAME ",e.BIO_USERNAME),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3),showsnackbar({message:"Apologies! Profile names are not allowed. Please change your bio.",timeout:3e3}.message)}else{showsnackbar({message:"Apologies! Your settings not updated",timeout:2e3}.message)}}}})}}),$("#radioMale").click(function(){radioMale(),changeOnce("gender"),$("#gender-change-alert").removeClass("hidden")}),$("#radioFemale").click(function(){radioFemale(),changeOnce("gender"),$("#gender-change-alert").removeClass("hidden")}),$("#country_change_but").click(function(){$("#location-change-alert").removeClass("hidden");var e={testid:5,tableid:1};e.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){!0===e.Grant_Access?($("#btn_save").addClass("hidden"),$("#country_change_but").addClass("hidden"),$("#country_save_but").removeClass("hidden"),$("#country_text").addClass("hidden"),$("#country").removeClass("hidden").prop("disabled",!1).focus().click()):void 0!==e.mess?showsnackbar({message:"Sorry, you can only use this once a week..<br>Please try after "+e.mess+".",timeout:2e3}.message):showsnackbar({message:"Sorry, you can only use this once a week.",timeout:2e3}.message)}})}),$("#bio_change_but").click(function(){console.log("bio change click"),$("#bio_text").addClass("hidden"),$("#bio_input").removeClass("hidden")}),$("#bio_save_but").click(function(){if(bio=$('#bio_input"]').val(),void 0===bio||""===bio||"null"==bio){$("#bio_input").focus(),$("#bio_sec").addClass("error"),setTimeout(function(){$("#bio_sec").removeClass("error")},5e3);showsnackbar("Please, share your bio")}else{var e={testid:10};e.bio=bio,e.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){!0===e.Grant_Access?($("#bio_change_but").removeClass("hidden"),$("#bio_save_but").addClass("hidden"),$("#bio_text").removeClass("hidden").html(bio),$("#btn_save").removeClass("hidden"),showsnackbar({message:"Your location has been updated",timeout:2e3}.message)):showsnackbar({message:"Apologies! Your bio couldn't be updated at the moment.</br>Please try again later",timeout:2e3}.message)}})}}),$("#dob_change_but").click(function(){$("#dob-change-alert").removeClass("hidden"),console.log("dob_change_but click ");var e={testid:5,tableid:2};e.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){(console.log("change dob data= ",e),!0===e.Grant_Access)?(console.log("change dob---"),$("#btn_save").addClass("hidden"),$("#dob_change_but").addClass("hidden"),$("#dob_save_but").removeClass("hidden"),$("#dob_text").addClass("hidden"),$("#dob").removeClass("hidden").prop("disabled",!1)):(console.log("show apologies msg---"),void 0!==e.mess?showsnackbar({message:"Apologies! you can only change year setting one in 7 Days.<br>Please try after "+e.mess+".",timeout:2e3}.message):showsnackbar({message:"Apologies! you can only change year setting one in 7 Days",timeout:2e3}.message))}})}),$("#dob_change_but").click(function(){$("#dob-change-alert").removeClass("hidden"),console.log("dob_change_but click ");var e={testid:5,tableid:2};e.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){(console.log("change dob data= ",e),!0===e.Grant_Access)?(console.log("change dob---"),$("#btn_save").addClass("hidden"),$("#dob_change_but").addClass("hidden"),$("#dob_save_but").removeClass("hidden"),$("#dob_text").addClass("hidden"),$("#dob").removeClass("hidden").prop("disabled",!1)):(console.log("show apologies msg---"),void 0!==e.mess?showsnackbar({message:"Apologies! you can only change year setting one in 7 Days.<br>Please try after "+e.mess+".",timeout:2e3}.message):showsnackbar({message:"Apologies! you can only change year setting one in 7 Days",timeout:2e3}.message))}})}),$("#country_save_but").click(function(){if(void 0===(country=$('input[name="country"]').val())||""===country||"null"==country){$('input[name="country"]').focus(),$("#country_sec").addClass("error"),setTimeout(function(){$("#country_sec").removeClass("error")},5e3);showsnackbar("Please, select your locality and country")}else{var e=$('input[name="country"]').val();country=$('input[name="country"]').val()+"$#$"+locality+"$#$"+countr+"$#$"+postal_code+"$#$"+latlng;var o={testid:7};o.country=country,o.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(o),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(o){!0===o.Grant_Access?($("#country_change_but").removeClass("hidden"),$("#country_save_but").addClass("hidden"),$("#country_text").removeClass("hidden").html(e),$("#btn_save").removeClass("hidden"),$("#country").addClass("hidden").prop("disabled",!1).focus().click(),showsnackbar({message:"Your location has been updated",timeout:2e3}.message)):showsnackbar({message:"Apologies! Your country couldn't be updated at the moment.</br>Please try again later",timeout:2e3}.message)}})}}),$("#dob_save_but").click(function(){var e=new Date,o=$("#dob").val();if(0!=o&&o>1947&&o<e.getFullYear()-10){var a={testid:6};a.dob=o,a.channelid=channelid,$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(a),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){!0===e.Grant_Access?($("#dob_change_but").removeClass("hidden"),$("#dob_save_but").addClass("hidden"),$("#dob_text").removeClass("hidden").html(o),$("#btn_save").removeClass("hidden"),$("#dob").addClass("hidden").prop("disabled",!1).focus().click(),showsnackbar({message:"Bingo!!! your birth year has been updated.",timeout:2e3}.message)):showsnackbar({message:"Apologies! Your birth year couldn't be updated at the moment.</br>Please try again later",timeout:2e3}.message)}})}else{showsnackbar("Apologies! Your birth year isn't be correct.</br>Please try again")}});var input=document.getElementById("country"),autocomplete=new google.maps.places.Autocomplete(input);function onErrorfunction(e){"female"!=e?$("#imgprofile").attr("src","https://s3-us-west-2.amazonaws.com/ng-utilities-images/demo_boy.png"):$("#imgprofile").attr("src","https://s3-us-west-2.amazonaws.com/ng-utilities-images/demo_girl.png")}google.maps.event.addListener(autocomplete,"place_changed",function(){var e=autocomplete.getPlace();latlng=e.geometry.location.lat()+","+e.geometry.location.lng();var o=e.address_components;for(x in o)"locality"==o[x].types[0]&&"political"==o[x].types[1]&&(locality=o[x].long_name),"country"==o[x].types[0]&&"political"==o[x].types[1]&&(countr=o[x].long_name),"postal_code"==o[x].types[0]&&(postal_code=o[x].long_name)}),$("#radioFNHide").click(function(){$("#user_name").removeClass("hidden"),$("#username").focus()}),$("#radioFNFull, #radioFNFirst").click(function(){$("#user_name").addClass("hidden"),$('input[name="succeedUsername"], input[name="username"]').val(""),$('input[name="username"]').removeClass("red").removeClass("green"),$("#ImageUsername").addClass("hidden"),$("#LoadingImageUsername").attr("src","")}),$("#followyes").click(function(){$("#shareprof").removeClass("hidden"),$("#social-prof").focus()}),$("#followno").click(function(){$("#shareprof").addClass("hidden")}),$("#imgprofile-1, #imgprofile-2, #imgprofile-3, #imgprofile-4").click(function(){$("#imgprofile").attr("src",$(this).attr("src").replace("60x60","120x120"))}),$("#img-0, #img-1, #img-2, #img-3, #img-4").click(function(){if(console.log("upload clickeddd!!s"),$("#"+$(this).attr("id")).hasClass("uploadcancel")){"female"!=gender?$("#imgprofile-"+$(this).attr("id").split("-")[1]).attr("src","https://s3-us-west-2.amazonaws.com/ng-utilities-images/demo_boy.png"):$("#imgprofile-"+$(this).attr("id").split("-")[1]).attr("src","https://s3-us-west-2.amazonaws.com/ng-utilities-images/demo_girl.png"),$("#"+$(this).attr("id")).removeClass("uploadcancel").html("add_box"),2==blurimage?$("#imgprofile").attr("src","https://img.neargroup.in/project/120x120/forcesize/profile_"+channelid):$("#imgprofile").attr("src","https://img.neargroup.in/project/120x120/forcesize/pixelate_6/profile_"+channelid);var e={testid:"8",channelid:channelid,image_no:$(this).attr("id").split("-")[1]};$.ajax({type:"POST",url:"userPreferences",dataType:"json",async:!0,crossDomain:!0,data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){}})}else $("#browseimage-"+$(this).attr("id").split("-")[1]).click()});var IdentityPoolId="us-west-2:abe76bd2-6112-4382-9501-1bc0e850ab90";AWS.config.update({region:"us-west-2",credentials:new AWS.CognitoIdentityCredentials({IdentityPoolId:IdentityPoolId})});var s3=new AWS.S3({apiVersion:"2006-03-01",params:{Bucket:"ng-image"}});function uploadToS3(e,o,a){console.log("uploadPhoto s3 files= ",e),console.log("s3 obj= ",{Key:o,Body:e,ContentType:e.type,ACL:"public-read"}),s3.putObject({Key:o,Body:e,ContentType:e.type,ACL:"public-read"},function(e,s){return e?(console.log("s3 upload error= ",e),a(!0)):(console.log("success data= ",s),a(!1,o))})}function uploadFinalToS3(e,o,a){console.log("in uploadFinalToS3 ",o);var s="profile_"+o;console.log("imageFile= ",e),s3.putObject({Key:s,Body:e,ContentType:e.type,ACL:"public-read"},function(e,o){e?(a(!0,null),console.log("copyObject error",e,e.stack)):(a(!1,!0),console.log("copyObject -- ",o))})}function readURL(e){if(console.log("read image input= ",e,e.files),e.files&&e.files[0]){var o=new FileReader;$("#uploadimg-"+$(e).attr("id").split("-")[1]).removeClass("hidden").attr("src","images/ezgif.gif"),$("#pic_sec, #btn_save").addClass("pointerdisabled"),$("#btn_save").html("wait..."),o.onload=function(o){$("#imgprofile-"+$(e).attr("id").split("-")[1]).attr("src",o.target.result);var a=o.target.result.split(",")[1];$.ajax({async:!0,crossDomain:!0,url:"https://vision.googleapis.com/v1/images:annotate?alt=json&key=AIzaSyDX2g336vJpmvGwGERnPsjOh5gvG9sPCJg",method:"POST",headers:{"content-type":"application/json; charset=UTF-8","cache-control":"no-cache"},data:'{"requests":[{"image":{"content":"'+a+'"},"features":[{"type":"SAFE_SEARCH_DETECTION","maxResults":1}]}]}'}).done(function(o){console.log("1 done");var a=o.responses[0];if("POSSIBLE"!=a.safeSearchAnnotation.adult&&"LIKELY"!=a.safeSearchAnnotation.adult&&"VERY_LIKELY"!=a.safeSearchAnnotation.adult&&"POSSIBLE"!=a.safeSearchAnnotation.violence&&"LIKELY"!=a.safeSearchAnnotation.violence&&"VERY_LIKELY"!=a.safeSearchAnnotation.violence){console.log("pic_upload safe vision");var s=new Date,n="profile_",t=channelid.toLowerCase()+"_"+s.getTime(),i=$("#"+$(e).attr("id"))[0].files[0];console.log("form data = ",i);var l=new FormData;l.append("postimage",i),l.append("name",n+t),console.log("form1 = ",n+t),uploadToS3(i,t,function(o,a){if(o){showsnackbar("Sorry, something went wrong. Please try again later.")}else{console.log("faceCheckName ---- ",a);var s="https://ng-image.s3.us-west-2.amazonaws.com/"+a;$.ajax({url:"https://face.neargroup.me",type:"POST",contentType:"application/json",processData:!1,data:JSON.stringify({url:s}),success:function(o){if(console.log("face check response ",o),o.faces&&o.faces.length>0)console.log("found faces !!!"),uploadFinalToS3(i,t,function(o,a){if(console.log("final image upload to s3 --"),o){showsnackbar("Sorry!!! Something went wrong."),$("#uploadimg-"+$(e).attr("id").split("-")[1]).addClass("hidden").attr("src","")}else{console.log("update image to db");var s={testid:"1",channelid:channelid,image_name:t,image_no:1};$.ajax({type:"POST",url:"userPreferences",dataType:"json",async:!0,crossDomain:!0,data:JSON.stringify(s),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(o){if(console.log("upload done url-- https://s3-us-west-2.amazonaws.com/ng-image/"),$("#uploadimg-"+$(e).attr("id").split("-")[1]).addClass("hidden").attr("src",""),"image_save"in o){showsnackbar("Your profile image has been uploaded"),$("#pic_sec, #btn_save").removeClass("pointerdisabled"),$("#btn_save").html("Save")}}})}var n={Bucket:"ng-image",Key:t};s3.deleteObject(n,function(e,o){e?console.log("s3 delete temp image err= ",e,e.stack):console.log("s3 delete temp image success-- ",o)})});else{console.log("No faces !!");showsnackbar("Sorry!!! You image does not have a face<br>Try uploading again"),$("#uploadimg-"+$(e).attr("id").split("-")[1]).addClass("hidden").attr("src",""),$("#pic_sec").removeClass("pointerdisabled");var a={Bucket:"ng-image",Key:t};s3.deleteObject(a,function(e,o){e?console.log("s3 delete temp image err= ",e,e.stack):console.log("s3 delete temp image success-- ",o)})}},error:function(e,o){console.log("face NOT found..  "),$("#pic_sec, #btn_save").removeClass("pointerdisabled")}})}})}else{showsnackbar("Sorry!!! You can't upload sexual/explicit image<br>Try uploading again"),$("#uploadimg-"+$(e).attr("id").split("-")[1]).addClass("hidden").attr("src",""),$("#pic_sec").removeClass("pointerdisabled")}})},o.readAsDataURL(e.files[0])}}function deactivate(){console.log("deactivate");var e={testid:"2",channelid:channelid};OpenModal("Deactivate","Are you sure, you want to deactivate account from NEARGROUP?"),$("#btnok").click(function(){CloseModal(),$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if($body.removeClass("loading"),e&&"deactivate"in e){showsnackbar("Deactivated Successfully!"),window.location.replace("myprofile.html?channelid="+encodeURIComponent(getUrlParameter("channelid")))}}})}),$("#btncancel").click(function(){CloseModal()})}function activateAccount(){var e={testid:"3",channelid:getUrlParameter("channelid")};$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify(e),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if($body.removeClass("loading"),e&&"activate"in e){showsnackbar("Activate Successfully!"),window.location.replace("editprofile.html?channelid="+encodeURIComponent(getUrlParameter("channelid"))+"&callback=YesProceed&close=123")}}})}function showsnackbar(e){var o=document.getElementById("toast-message");o.innerHTML=e,o.className="show",setTimeout(function(){o.className=o.className.replace("show","")},3e3)}function OpenModal(e,o){$("#overlayContact").show(),$("#myModal").find("#model_title_text").html(e),$("#myModal").find("#model_t_text").html(o),$("#myModal").css({top:"-200px",display:"block"}),$("#myModal").animate({top:"35px"},"100")}function CloseModal(){$("#overlayContact").hide(),$("#myModal").hide()}function socialDeactivate(e){OpenModal("Remove","Do you want to remove your social account?"),$("#btnok").click(function(){CloseModal(),""!=e&&$.ajax({type:"POST",url:"userPreferences",dataType:"json",data:JSON.stringify({channelid:channelid,testid:"4",tbname:e}),cache:!1,contentType:"application/json",mimeType:"application/json",success:function(e){if(e&&"deactivate"in e){showsnackbar("Social Account Deactivated Successfully!"),window.location.replace("editprofile.html?channelid="+encodeURIComponent(getUrlParameter("channelid")))}}})}),$("#btncancel").click(function(){CloseModal()})}function showBioEdit(){$("#bio_test_input").addClass("hidden"),$("#bio_input").removeClass("hidden")}